/*! api-jquery-plugins 2014-08-22 */
!function(){window.JST={},window.JST.dashboard=_.template(['<div class="row">','<div class="navigation col-md-3">','<div class="order btn-group btn-group-justified">','<div class="btn-group"><button type="button" data-direction="desc" class="btn btn-default active">Newest First</button></div>','<div class="btn-group"><button type="button" data-direction="asc" class="btn btn-default">Oldest First</button></div>',"</div>","<hr>",'<ul class="folders nav nav-pills nav-stacked">',"<% _.each(folders, function (folder, name) { %>",'<li class="<%= name === currentFolder ? "active" : "" %>"><a href="#<%= name %>"><span class="glyphicon glyphicon-folder-close"></span> <%= name %> <span class="badge pull-right"><%= folder.data.length %></span></a></li>',"<% }); %>","</ul>","<hr>",'<form action="#" class="well" method="get" role="form">',"<fieldset>","<legend>Search</legend>",'<div class="input-group">','<input class="form-control search" name="q" placeholder="Search" type="search">','<span class="input-group-btn">','<button class="clear btn btn-default" type="button"><span class="clear glyphicon glyphicon-remove"></span></button>',"</span>","</div>","</fieldset>","</form>","</div>",'<div class="content col-md-9">',"</div> <!-- /.content -->","</div> <!-- /.row -->"].join("")),window.JST.dashboardContent=_.template(['<table class="table table-striped requests">',"<% if (requests.length === 0) { %>","<tr>","<td><h4>No Results</h4></td>","</tr>","<% } %>","<% _.each(requests, function (request) { %>","<tr>",'<td class="form-thumbnail">',"<% if (request.form_id) { %>",'<img src="https://www.covermymeds.com/forms/pdf/thumbs/90/highmark_west_virginia_prescription_drug_medication_6827.jpg">',"<% } else { %>",'<img src="https://www.covermymeds.com/styles_r2/images/pick_the_form.png">',"<% } %>","</td>","<td>","<h4><%= request.patient.first_name %> <%= request.patient.last_name %> (Key: <%= request.id %>)</h4>",'<dl class="dl-horizontal request-details">','<dt>Status</dt><dd><span class="label label-info"><%= request.workflow_status %></span></dd>','<dt>Drug</dt><dd><%= request.prescription.name || "(Missing)" %></dd>',"<dt>Created</dt><dd><%= new Date(Date.parse(request.created_at)).toLocaleDateString() %></dd>",'<dt>Link</dt><dd><a href="<%= request.tokens[0].html_url %>">View on CoverMyMeds.com &rarr;</a></dd>',"</dl>","</td>","</tr>","<% }); %>","</table>","<% if (totalPages > 0) { %>",'<ul class="pagination">',"<% function insideWindow(page, currentPage) {","var window = 2;","return Math.abs(currentPage - page) <= window;","} %>","<% i = 0; %>",'<li class="<%= (i === currentPage) ? "active" : "" %>"><a href="<%= i %>"><%= (i + 1) %></a></li>',"<% if (!insideWindow(i + 1, currentPage)) { %>",'<li><a href="#">&hellip;</a></li>',"<% } %>","<% for (i = 1; i <= totalPages - 1; i += 1) {","if (insideWindow(i, currentPage)) { %>",'<li class="<%= (i === currentPage) ? "active" : "" %>"><a href="<%= i %>"><%= (i + 1) %></a></li>',"<% }","} %>","<% i = totalPages; %>","<% if (!insideWindow(i - 1, currentPage)) { %>",'<li><a href="#">&hellip;</a></li>',"<% } %>",'<li class="<%= (i === currentPage) ? "active" : "" %>"><a href="<%= i %>"><%= (i + 1) %></a></li>',"</ul>","<% } %>"].join("")),window.JST.formsearch=_.template(['<table class="table">',"<tr>",'<td><img src="<%= form.thumbnail_url %>"></td>',"<td><%= form.text %></td>","</tr>","</table>"].join("")),window.JST.action_button=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<button class='"+(null==(__t=action.slug())?"":__t)+" btn'>"+(null==(__t=action.title)?"":__t)+"</button>\n";return __p},window.JST.action_link=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+="<a class='"+(null==(__t=action.slug)?"":__t)+" btn' href='"+(null==(__t=action.href)?"":__t)+"'>"+(null==(__t=action.title)?"":__t)+"</a>\n";return __p},window.JST.checkbox_question=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="question checkbox '+(null==(__t=question.isRequired())?"":__t)+'">\n  <label for="'+(null==(__t=question.questionId())?"":__t)+'">\n\n    <input type="checkbox"\n           id="'+(null==(__t=question.questionId())?"":__t)+'"\n           name="'+(null==(__t=question.questionId())?"":__t)+'"\n           value="'+(null==(__t=question.checked_value)?"":__t)+'"\n           '+(null==(__t=question.isRequired())?"":__t)+"\n    />\n    "+(null==(__t=question.questionText())?"":__t)+"\n\n  </label>\n</div>\n\n";return __p},window.JST.choice_question=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<div class="question choice '+(null==(__t=question.isRequired())?"":__t)+'">\n  <label for="'+(null==(__t=question.questionId())?"":__t)+'">\n    '+(null==(__t=question.questionText())?"":__t)+'\n  </label>\n\n  <select id="'+(null==(__t=question.questionId())?"":__t)+'"\n          name="'+(null==(__t=question.questionId())?"":__t)+'"\n          '+(null==(__t=question.selectMultiple())?"":__t)+" >\n    ",question.choices().forEach(function(a){__p+='\n      <option value="'+(null==(__t=a.choice_id)?"":__t)+'"\n              '+(null==(__t=question.isSelected(a))?"":__t)+" >\n        "+(null==(__t=a.choice_text)?"":__t)+"\n      </option>\n    "}),__p+="\n  </select>\n\n</div>\n";return __p},window.JST.date_question=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="question date '+(null==(__t=question.isRequired())?"":__t)+'">\n  <label for="'+(null==(__t=question.questionId())?"":__t)+'">\n    '+(null==(__t=question.questionText())?"":__t)+'\n  </label>\n\n  <input type="date"\n         id="'+(null==(__t=question.questionId())?"":__t)+'"\n         name="'+(null==(__t=question.questionId())?"":__t)+'"\n         value="'+(null==(__t=question.value)?"":__t)+'"\n         '+(null==(__t=question.isRequired())?"":__t)+"\n  />\n</div>\n";return __p},window.JST.file_question=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="question file '+(null==(__t=question.isRequired())?"":__t)+'">\n  <label for="'+(null==(__t=question.questionId())?"":__t)+'">\n    '+(null==(__t=question.questionText())?"":__t)+'\n  </label>\n\n  <input type="file"\n         id="'+(null==(__t=question.questionId())?"":__t)+'"\n         name="'+(null==(__t=question.questionId())?"":__t)+'"\n         value="'+(null==(__t=question.value)?"":__t)+'"\n         '+(null==(__t=question.isRequired())?"":__t)+"\n  />\n</div>\n\n";return __p},window.JST.form=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="<form class='request-pages-form' method=\"POST\">\n  ",form.questionSets.forEach(function(a){__p+="\n    "+(null==(__t=a.render())?"":__t)+"\n  "}),__p+="\n\n  <fieldset class='controls'>\n    <input type='hidden' class='form_action' name='form_action' value='' />\n\n    ",form.actions.forEach(function(a){__p+="\n      "+(null==(__t=a.render())?"":__t)+"\n    "}),__p+="\n  </fieldset>\n</form>\n";return __p},window.JST.free_area_question=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="question free-area '+(null==(__t=question.isRequired())?"":__t)+'">\n  <label for="'+(null==(__t=question.questionId())?"":__t)+'">\n    '+(null==(__t=question.questionText())?"":__t)+'\n  </label>\n\n  <textarea\n    id="'+(null==(__t=question.questionId())?"":__t)+'"\n    name="'+(null==(__t=question.questionId())?"":__t)+'"\n    placeholder="'+(null==(__t=question.placeholder())?"":__t)+'"\n    '+(null==(__t=question.isRequired())?"":__t)+" >\n\n    "+(null==(__t=question.value)?"":__t)+"\n\n  </textarea>\n</div>\n";return __p},window.JST.free_text_question=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="question free-text '+(null==(__t=question.isRequired())?"":__t)+'">\n  <label for="'+(null==(__t=question.questionId())?"":__t)+'">\n    '+(null==(__t=question.questionText())?"":__t)+'\n  </label>\n\n  <input type="text"\n         id="'+(null==(__t=question.questionId())?"":__t)+'"\n         name="'+(null==(__t=question.questionId())?"":__t)+'"\n         value="'+(null==(__t=question.value)?"":__t)+'"\n         placeholder="'+(null==(__t=question.placeholder())?"":__t)+'"\n         '+(null==(__t=question.isRequired())?"":__t)+"\n  />\n</div>\n";return __p},window.JST.hidden_question=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<input type="hidden"\n  id="'+(null==(__t=question.questionId())?"":__t)+'"\n  name="'+(null==(__t=question.questionId())?"":__t)+'"\n  value="'+(null==(__t=question.value)?"":__t)+'"\n/>\n';return __p},window.JST.numeric_question=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="question numeric '+(null==(__t=question.isRequired())?"":__t)+'">\n  <label for="'+(null==(__t=question.questionId())?"":__t)+'">\n    '+(null==(__t=question.questionText())?"":__t)+'\n  </label>\n\n  <input type="number"\n         id="'+(null==(__t=question.questionId())?"":__t)+'"\n         name="'+(null==(__t=question.questionId())?"":__t)+'"\n         value="'+(null==(__t=question.value)?"":__t)+'"\n         '+(null==(__t=question.isRequired())?"":__t)+"\n  />\n</div>\n";return __p},window.JST.question_set=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+="<fieldset class='question-set'>\n  <legend>"+(null==(__t=questionSet.title)?"":__t)+"</legend>\n  ",questionSet.questions.forEach(function(a){__p+="\n    "+(null==(__t=a.render())?"":__t)+"\n  "}),__p+="\n</fieldset>\n";return __p},window.JST.statement_question=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="question statement">\n  <label for="'+(null==(__t=question.questionId())?"":__t)+'">\n    '+(null==(__t=question.questionText())?"":__t)+"\n  </label>\n\n  <p>\n    "+(null==(__t=question.content_html())?"":__t)+"\n  </p>\n</div>\n";return __p},window.JST.unknown_question=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="question">\n  Something went wrong (I don\'t know how to display a question of type "'+(null==(__t=question.questionType())?"":__t)+'").\n</div>\n';return __p}}(window),function(a){a.fn.extend({formSearch:function(b){return b=b||{},this.each("destroy"===b?function(){a(this).select2("destroy")}:function(){var c;c="https://"+(b.debug?"staging.":"")+"api.covermymeds.com/forms?v="+b.version,a(this).select2({placeholder:"Plan, PBM, Form name, BIN, or Contract ID",minimumInputLength:4,ajax:{quietMillis:250,url:b.url||c,transport:function(c){return b.url||(c.beforeSend=function(a){a.setRequestHeader("Authorization","Basic "+Base64.encode(b.apiId+":x-no-pass"))}),a.ajax(c)},data:function(c){var d,e;return d=b.state||a('select[name="request[state]"]').val(),e=b.drugId||a('input[name="request[prescription][drug_id]"]').val(),{q:c,state:d,drug_id:e}},results:function(a,b){var c,d,e,f=[];for(c=10*b<a.total,d=0,e=a.forms.length;e>d;d+=1)f.push({id:a.forms[d].request_form_id,text:a.forms[d].description,thumbnail_url:a.forms[d].thumbnail_url});return{results:f,more:c}}},formatResult:function(a){return JST.formsearch({form:a})}})})}})}(jQuery),function(a){a.fn.extend({drugSearch:function(b){return b=b||{},this.each("destroy"===b?function(){a(this).select2("destroy")}:function(){var c;c="https://"+(b.debug?"staging.":"")+"api.covermymeds.com/drugs?v="+b.version,a(this).select2({placeholder:"Begin typing the medication name and select from list",minimumInputLength:4,ajax:{quietMillis:250,url:b.url||c,transport:function(c){return b.url||(c.beforeSend=function(a){a.setRequestHeader("Authorization","Basic "+Base64.encode(b.apiId+":x-no-pass"))}),a.ajax(c)},data:function(a){return{q:a}},results:function(a,b){var c,d,e,f=[];for(c=10*b<a.total,d=0,e=a.drugs.length;e>d;d+=1)f.push({text:a.drugs[d].full_name,id:a.drugs[d].id});return{results:f,more:c}}}})})}})}(jQuery),function(a){a.fn.extend({createRequest:function(b){return b=b||{},this.each("destroy"===b?function(){a(this).off("click")}:function(){var c,d,e;c="https://"+(b.debug?"staging.":"")+"api.covermymeds.com/requests?v="+b.version,d=a(this),e=!1,d.on("click",function(f){if(f.preventDefault(),e!==!0){d.attr("disabled","disabled"),e=!0;var g={request:{urgent:a('input[name="request[urgent]"]').attr("checked"),form_id:a('input[name="request[form_id]"]').val(),state:a('select[name="request[state]"]').val(),patient:{first_name:a('input[name="request[patient][first_name]"]').val(),middle_name:a('input[name="request[patient][middle_name]"]').val(),last_name:a('input[name="request[patient][last_name]"]').val(),date_of_birth:a('input[name="request[patient][date_of_birth]"]').val(),gender:a('select[name="request[patient][gender]"]').val(),email:a('input[name="request[patient][email]"]').val(),member_id:a('input[name="request[patient][member_id]"]').val(),phone_number:a('input[name="request[patient][phone_number]"]').val(),address:{street_1:a('input[name="request[patient][address][street_1]"]').val(),street_2:a('input[name="request[patient][address][street_2]"]').val(),city:a('input[name="request[patient][address][city]"]').val(),state:a('select[name="request[patient][address][state]"]').val(),zip:a('input[name="request[patient][address][zip]"]').val()}},payer:{form_search_text:a('input[name="request[payer][form_search_text]"]').val(),bin:a('input[name="request[payer][bin]"]').val(),pcn:a('input[name="request[payer][pcn]"]').val(),group_id:a('input[name="request[payer][group_id]"]').val(),medical_benefit_name:a('input[name="request[payer][medical_benefit_name]"]').val(),drug_benefit_name:a('input[name="request[payer][drug_benefit_name]"]').val()},prescriber:{npi:a('input[name="request[prescriber][npi]"]').val(),first_name:a('input[name="request[prescriber][first_name]"]').val(),last_name:a('input[name="request[prescriber][last_name]"]').val(),clinic_name:a('input[name="request[prescriber][clinic_name]"]').val(),address:{street_1:a('input[name="request[prescriber][address][street_1]"]').val(),street_2:a('input[name="request[prescriber][address][street_2]"]').val(),city:a('input[name="request[prescriber][address][city]"]').val(),state:a('select[name="request[prescriber][address][state]"]').val(),zip:a('input[name="request[prescriber][address][zip]"]').val()},fax_number:a('input[name="request[prescriber][fax_number]"]').val(),phone_number:a('input[name="request[prescriber][phone_number]"]').val()},prescription:{drug_id:a('input[name="request[prescription][drug_id]"]').val(),strength:a('input[name="request[prescription][strength]"]').val(),frequency:a('input[name="request[prescription][frequency]"]').val(),enumerated_fields:a('input[name="request[prescription][enumerated_fields]"]').val(),refills:a('input[name="request[prescription][refills]"]').val(),dispense_as_written:a('input[name="request[prescription][dispense_as_written]"]').val(),quantity:a('input[name="request[prescription][quantity]"]').val(),days_supply:a('input[name="request[prescription][days_supply]"]').val()},pharmacy:{name:a('input[name="request[pharmacy][name]"]').val(),address:{street_1:a('input[name="request[pharmacy][address][street_1]"]').val(),street_2:a('input[name="request[pharmacy][address][street_2]"]').val(),city:a('input[name="request[pharmacy][address][city]"]').val(),state:a('select[name="request[pharmacy][address][state]"]').val(),zip:a('input[name="request[pharmacy][address][zip]"]').val()},fax_number:a('input[name="request[pharmacy][fax_number]"]').val(),phone_number:a('input[name="request[pharmacy][phone_number]"]').val()},enumerated_fields:{icd9_0:a('input[name="request[enumerated_fields][icd9_0]"]').val(),icd9_1:a('input[name="request[enumerated_fields][icd9_1]"]').val(),icd9_2:a('input[name="request[enumerated_fields][icd9_2]"]').val(),failed_med_0:a('input[name="request[enumerated_fields][failed_med_0]"]').val(),failed_med_1:a('input[name="request[enumerated_fields][failed_med_1]"]').val(),failed_med_2:a('input[name="request[enumerated_fields][failed_med_2]"]').val(),failed_med_3:a('input[name="request[enumerated_fields][failed_med_3]"]').val(),failed_med_4:a('input[name="request[enumerated_fields][failed_med_4]"]').val(),failed_med_5:a('input[name="request[enumerated_fields][failed_med_5]"]').val(),failed_med_6:a('input[name="request[enumerated_fields][failed_med_6]"]').val(),failed_med_7:a('input[name="request[enumerated_fields][failed_med_7]"]').val(),failed_med_8:a('input[name="request[enumerated_fields][failed_med_8]"]').val(),failed_med_9:a('input[name="request[enumerated_fields][failed_med_9]"]').val()}}};a.ajax({url:b.url||c,type:"POST",beforeSend:function(a){b.url||a.setRequestHeader("Authorization","Basic "+Base64.encode(b.apiId+":x-no-pass"))},success:function(a,c,f){d.removeAttr("disabled"),e=!1,"function"==typeof b.success&&b.success(a,c,f)},error:function(a,c,f){d.removeAttr("disabled"),e=!1,"function"==typeof b.error&&b.error(a,c,f)},data:b.data||g})}})})}})}(jQuery),function(a){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")});var b=function(a){_.bindAll(this,"load","sort","filter","render","paginate","search","selectFolder","order","bindEvents","unbindEvents"),this.elem=a.elem,this.url=a.url,this.defaultUrl="https://"+(a.debug?"staging.":"")+"api.covermymeds.com/requests/search?v="+a.version,this.tokenIds=a.tokenIds||[],this.apiId=a.apiId||"",this.currentPage=0,this.perPage=10,this.currentFolder="All",this.folders={All:{workflow_statuses:["New","Shared","Shared \\ Accessed Online","Appealed","Sent to Plan"],data:[]},New:{workflow_statuses:["New","Shared","Shared \\ Accessed Online"],data:[]},Open:{workflow_statuses:["Appealed","Sent to Plan"],data:[]}},this.currentOrder="desc",void 0===a.data?this.load(_.bind(function(){this.sort(),this.filter(),this.render()},this)):(this.data=a.data,this.sort(),this.filter(),this.render())};b.prototype.load=function(b){var c=this;this.elem.html("<h3>Loading...</h3>"),a.ajax({url:this.url||this.defaultUrl,type:"POST",data:{token_ids:this.tokenIds},beforeSend:function(a){void 0===c.url&&a.setRequestHeader("Authorization","Bearer "+c.apiId+"+")},success:function(a){c.data=a.requests,"function"==typeof b&&b()},error:function(){c.elem.empty().text("There was an error processing your request. Please try again.")}})},b.prototype.sort=function(){var a=this;this.data.sort(function(a,b){return a.created_at===b.created_at?0:a.created_at<b.created_at?1:-1}),_.each(this.data,function(b){_.each(a.folders,function(a){-1!==a.workflow_statuses.indexOf(b.workflow_status)&&a.data.push(b)})})},b.prototype.filter=function(){var b,c,d,e;if(b=this.folders[this.currentFolder].data,this.filteredData=[],this.searchQuery=a("input[name=q]").val()||"",this.searchQuery=this.searchQuery.trim().toLowerCase(),""===this.searchQuery)return void(this.filteredData=b);for(d=0,e=b.length;e>d;d+=1)c=b[d],-1!==c.patient.first_name.toLowerCase().indexOf(this.searchQuery)?this.filteredData.push(c):-1!==c.patient.last_name.toLowerCase().indexOf(this.searchQuery)?this.filteredData.push(c):-1!==c.patient.date_of_birth.toLowerCase().indexOf(this.searchQuery)?this.filteredData.push(c):c.prescription.name&&-1!==c.prescription.name.toLowerCase().indexOf(this.searchQuery)?this.filteredData.push(c):-1!==c.id.toLowerCase().indexOf(this.searchQuery)&&this.filteredData.push(c)},b.prototype.render=function(){this.elem.html(JST.dashboard({folders:this.folders,currentFolder:this.currentFolder})),this.displayContent(),this.bindEvents()},b.prototype.bindEvents=function(){a(".pagination a",this.elem).on("click",this.paginate),a("input.search",this.elem).on("keyup",_.debounce(this.search,500)),a("button.clear",this.elem).on("click",this.search),a(".folders a",this.elem).on("click",this.selectFolder),a(".order button",this.elem).on("click",this.order)},b.prototype.unbindEvents=function(){a(".pagination a",this.elem).off("click",this.paginate),a("input.search",this.elem).off("keyup",_.debounce(this.search,500)),a("button.clear",this.elem).off("click",this.search),a(".folders a",this.elem).off("click",this.selectFolder),a(".order button",this.elem).off("click",this.order)},b.prototype.order=function(b){var c=a(b.target);this.currentOrder!==c.data("direction")&&(c.addClass("active").parent("div").siblings("div").children("button").removeClass("active"),this.currentOrder=c.data("direction"),_.each(this.folders,function(a){a.data.reverse()}),this.displayContent())},b.prototype.selectFolder=function(b){var c=a(b.target);b.preventDefault(),a(".folders li",this.elem).removeClass("active"),c.parent("li").addClass("active"),this.currentFolder=c.attr("href").substring(1),this.currentPage=0,this.filter(),this.displayContent()},b.prototype.search=function(b){var c=a(b.target);b.preventDefault(),c.hasClass("clear")&&a("input[name=q]",this.elem).val(""),this.currentPage=0,this.filter(),this.displayContent()},b.prototype.paginate=function(b){var c,d;b.preventDefault(),d=a(b.target),c=parseInt(d.attr("href"),10),isNaN(c)||(this.currentPage=c,this.displayContent())},b.prototype.displayContent=function(){var b,c,d;b=this.currentPage*this.perPage,c=b+this.perPage,d=Math.ceil(this.filteredData.length/this.perPage)-1,a(".content",this.elem).html(JST.dashboardContent({requests:this.filteredData.slice(b,c),currentPage:this.currentPage,totalPages:d}))},a.fn.extend({dashboard:function(c){return this.each("destroy"===c?function(){var b=a(this),c=b.data("dashboard");c&&c.unbindEvents(),b.remove()}:function(){var d=a(this);c=a.extend(c,{elem:d}),d.data("dashboard",new b(c))})}})}(jQuery),function(a){a.fn.showRequestPagesForm=function(b){return a.each(this,_.bind(function(){var a=new RequestPages(b);a.container=this,a.showForm()},this)),this}}(jQuery),window.RequestPages=function(a){this.defaultSelector=".request-pages",this.container=$(this.defaultSelector),this.version=a.version||1,this.apiId=a.apiId||"",this.tokenId=a.tokenId||"",this.requestId=a.requestId||"",this.resourceUrl=a.url||"https://"+(a.debug?"staging.":"")+"api.covermymeds.com/request-pages/"+this.requestId+"?v="+this.version+"&api_id="+this.apiId+"&token_id="+this.tokenId,console.log("this is the resourceURL "+this.resourceUrl),this._getSuccessCallback=_.bind(function(a){this.form=new RequestPages.Form(a.request_page.forms,a.request_page.data,a.request_page.actions),$(this.container).html(this.form.render()),$(this.container).find("form").on("submit",_.bind(function(){return this.postForm(),!1},this))},this),this.showForm=_.bind(function(){$.get(this.resourceUrl,this._getSuccessCallback)},this),this.postForm=_.bind(function(){$.post(this.resourceUrl,$(this.container).find("form").serialize(),this._getSuccessCallback)},this)},window.RequestPages.Form=function(a,b,c){this.actionsJson=c,this.template="form",this.name=_.bind(function(){return Object.keys(a)[0]},this),this.formJson=a[this.name()],this.currentValues=b[this.name()],this.questionSets=[],this.formJson.question_sets.forEach(_.bind(function(a){this.questionSets.push(new RequestPages.QuestionSet(a,this.currentValues))},this)),this.actions=[],this.actionsJson.forEach(_.bind(function(a){this.actions.push(new RequestPages.Form.Action(a))},this)),this.find_question_by_id=_.bind(function(a){var b={};return this.questionSets.forEach(_.bind(function(c){c.questions.forEach(_.bind(function(c){return c.questionId()===a?b=c:void 0},this))},this)),b},this),this.render=_.bind(function(){return JST[this.template]({form:this})},this)},window.RequestPages.Form.Action=function(a){this.ref=a.ref,this.title=a.title,this.href=a.href,this.method=a.method,this.template="action_button",this.slug=_.bind(function(){return this.title.toLowerCase().replace(/[\s\/]+/g,"_")},this),this._addHandler=_.bind(function(){var a="button."+this.slug();$(".request-pages").on("click",a,_.bind(function(){$("input.form_action").val(this.title)},this))},this),this.render=_.bind(function(){return this._addHandler(),JST[this.template]({action:this})},this)},window.RequestPages.QuestionSet=function(a,b){this.title=a.title,this.template="question_set",this.questions=[],a.questions.forEach(_.bind(function(a){var c;return c=b[a.question_id],this.questions.push(RequestPages.Question.create(a,c))},this)),this.render=_.bind(function(){return JST[this.template]({questionSet:this})},this)},window.RequestPages.Question=function(a,b){null==b&&(b=""),this.dna=a,this.value=b,this.template="unknown_question",this.questionType=_.bind(function(){return this.dna.question_type},this),this.questionText=_.bind(function(){return this.dna.question_text},this),this.questionId=_.bind(function(){return this.dna.question_id},this),this.helpText=_.bind(function(){return this.dna.help_text},this),this.defaultNextQuestionId=_.bind(function(){return this.dna.default_next_question_id},this),this.isRequired=_.bind(function(){return"REQUIRED"===this.dna.flag?"required":""},this),this.render=_.bind(function(){return JST[this.template]({question:this})},this)},window.RequestPages.Question.create=function(a,b){null==b&&(b="");var c=function(){switch(a.question_type){case"FREE_TEXT":return RequestPages.Question.FreeText;case"CHOICE":return RequestPages.Question.Choice;case"DATE":return RequestPages.Question.Date;case"NUMERIC":return RequestPages.Question.Numeric;case"STATEMENT":return RequestPages.Question.Statement;case"HIDDEN":return RequestPages.Question.Hidden;case"FILE":return RequestPages.Question.File;case"CHECKBOX":return RequestPages.Question.Checkbox;case"FREE_AREA":return RequestPages.Question.FreeArea;default:return function(a){return a}}}();return c(new RequestPages.Question(a,b))},window.RequestPages.Question.init=function(){},window.RequestPages.Question.Checkbox=function(a){return a.template="checkbox_question",a},window.RequestPages.Question.Choice=function(a){return a.template="choice_question",a.selectMultiple=_.bind(function(){return this.dna.select_multiple?"multiple":""},a),a.choices=_.bind(function(){return this.dna.choices},a),a.isSelected=_.bind(function(a){return a.choice_id===this.value?"selected":""},a),a},window.RequestPages.Question.Date=function(a){return a.template="date_question",a},window.RequestPages.Question.File=function(a){return a.template="file_question",a},window.RequestPages.Question.FreeArea=function(a){return a.template="free_area_question",a.placeholder=_.bind(function(){return this.dna.placeholder},a),a},window.RequestPages.Question.FreeText=function(a){return a.template="free_text_question",a.placeholder=_.bind(function(){return this.dna.placeholder},a),a},window.RequestPages.Question.Hidden=function(a){return a.template="hidden_question",a},window.RequestPages.Question.Numeric=function(a){return a.template="numeric_question",a},window.RequestPages.Question.Statement=function(a){return a.template="statement_question",a.content_plain=_.bind(function(){return this.dna.content_plain},a),a.content_html=_.bind(function(){return this.dna.content_html},a),a},function(a){a.fn.extend({showHelp:function(b){return b=a.extend({},b),this.each(function(){var b='<h1>For assistance using CoverMyMeds&reg;</h1><ul><li>Phone: 1-866-452-5017</li><li>Email: <a href="mailto:help@covermymeds.com">help@covermymeds.com</a></li></ul><h1>Send forms or report data issues</h1><ul><li>Phone: 1-866-452-5017</li><li>Fax: 1-615-379-2541</li><li>Email: <a href="mailto:data@covermymeds.com">data@covermymeds.com</a></li>';a(this).html(b)})}})}(jQuery);var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=Base64._utf8_encode(a);j<a.length;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return i},decode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=this._keyStr.indexOf(a.charAt(j++)),f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!=g&&(i+=String.fromCharCode(c)),64!=h&&(i+=String.fromCharCode(d));return i=Base64._utf8_decode(i)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}};